\newcommand{\ActionSymbol}[1]{
  \tikz \path[draw, fill]
    (0.0ex, 1.0ex) -- (0.3ex, 1.3ex) -- (0.6ex, 1.0ex) -- (0.3ex, 0.7ex)
    (0.5ex, 0.5ex) -- (1.0ex, 1.0ex) -- (0.5ex, 1.5ex) -- (1.0ex, 2.0ex) -- (2.0ex, 1.0ex) -- (1.0ex, 0.0ex)
    \ifnum #1 > 1
    (1.9ex, 0.5ex) -- (2.4ex, 1.0ex) -- (1.9ex, 1.5ex) -- (2.3ex, 1.9ex) -- (3.2ex, 1.0ex) -- (2.3ex, 0.1ex)
    \ifnum #1 > 2
    (3.1ex, 0.5ex) -- (3.6ex, 1.0ex) -- (3.1ex, 1.5ex) -- (3.4ex, 1.8ex) -- (4.2ex, 1.0ex) -- (3.4ex, 0.2ex)
    \fi
    \fi
    ;
}

\newcommand{\CheckFormulaVariable}[2]{
  \tikz[baseline] \path
    node[draw, shape=rectangle, anchor=base] (box) { #2 }
    (box.south) node[below=-0.5ex] {\tiny \scshape #1};
}

\newcommand{\CheckFormula}[1]{
  \(\mbox{1d20} + \CheckFormulaVariable{}{\phantom{10}} \left(
    \foreach[count=\index] \name/\value in {#1} {
      \ifnum \index > 1 + \fi
      \CheckFormulaVariable{\name}{\ifx \name \value \phantom{1}\else \value \fi}
    }
    \right)
  \)
}
  